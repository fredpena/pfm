<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/templateProgress.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">



    <ui:define name="pagetitle">
        #{projectConfBean.project.name}
    </ui:define> 

    <ui:define name="title">

    </ui:define>

    <ui:define name="subtitle">
        #{msgs.progressEstimation}
    </ui:define>

    <ui:define name="body">

        <h:form id="formProgressEstimation" >
            <p:growl id="msgs" showDetail="true"/>
            <p:contextMenu for="tableProgressEstimation" widgetVar="cMenu">   
                <p:menuitem value="Edit Cell" icon="ui-icon-search" onclick="PF('cellEstimation').showCellEditor();
                        return false;"/>  
                <p:menuitem value="Hide Menu" icon="ui-icon-close" onclick="PF('cMenu').hide()"/>  
            </p:contextMenu> 
            <p:dataTable id="tableProgressEstimation" styleClass="progressStimTbl" var="disicpline" value="#{progressDetailBean.disciplines}"  editable="true" editMode="cell" widgetVar="cellEstimation">
                <!--                <p:ajax event="cellEdit" listener="" update=":formProgressEstimation:msgs" />-->
                <p:columnGroup type="header">
                    <p:row>
                        <p:column colspan="0" headerText="" />
                        <p:column colspan="4" headerText="#{msgs.abstract}" />
                        <p:column colspan="4" headerText="#{msgs.objective}" />
                        <p:column colspan="4" headerText="#{msgs.fulfillment}" />
                    </p:row>
                </p:columnGroup>
                <p:column styleClass="columUsecases">
                    <h:outputText value="#{disicpline.name}" />
                </p:column>

                <c:forEach  var="abstract" items="#{progressDetailBean.disciplines}" >
                    <p:column headerText="#{discipline.name.charAt(0)}"  >
                        <h:outputText value="#{abstract.name}" />
                    </p:column>
                </c:forEach>

                <c:forEach  var="objective" items="#{progressDetailBean.disciplines}" >
                    <p:column headerText="#{discipline.name.charAt(0)}"  >
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{objective.name}" /></f:facet>
                            <f:facet name="input"><p:inputText id="#{objective.name}" value="#{objective.name}" style="width:100%"/></f:facet>
                        </p:cellEditor> 
                    </p:column>
                </c:forEach>

                <c:forEach  var="fulfillment" items="#{progressDetailBean.disciplines}" >
                    <p:column headerText="#{discipline.name.charAt(0)}"  >
                        <h:outputText value="#{fulfillment.name}" />
                    </p:column>
                </c:forEach>

            </p:dataTable>
            <table id="leyendaProgressEstimation" class="leyendaProgressTable progressStimTbl">
                <tr class="headTableLegend">
                    <td colspan="2">#{msgs.legend}</td>
                </tr>
                <tr>
                    <td>#{msgs.letter_i}.-</td>
                    <td>#{msgs.inception}</td>
                </tr>
                <tr>
                    <td>#{msgs.letter_e}.-</td>
                    <td>#{msgs.elaboration}</td>
                </tr>
                <tr>
                    <td>#{msgs.letter_c}.-</td>
                    <td>#{msgs.construction}</td>
                </tr>
                <tr>
                    <td>#{msgs.letter_t}.-</td>
                    <td>#{msgs.transition}</td>
                </tr>
            </table>
            <h:panelGroup id="pnlStats" styleClass="pnlStats" layout="block" style="margin-bottom: 5px;">
                <p:commandButton id="stats" value="#{msgs.stats}"  oncomplete="PF('statsPanel').show()" styleClass="btn btn-success" />
            </h:panelGroup>
        </h:form>

        <p:dialog id="statsPanelDialog" header="#{msgs.stats} #{msgs.progressEstimation}" widgetVar="statsPanel" hideEffect="fade" dynamic="true">            

        </p:dialog>

    </ui:define>


</ui:composition>

