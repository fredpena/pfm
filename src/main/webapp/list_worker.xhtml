<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/templatePhasePlan.xhtml">


    <ui:define name="title">
        #{msgs.listWorker_subtitle}

    </ui:define>    

    <ui:define name="pagetitle">
        #{msgs.namerup}        
    </ui:define>

    <ui:define name="body">
        <h:outputScript target="head">
            $ = jQuery;
            $(document).ready(function() {
            $("#submitcreateworker").click(function(e){
            e.preventDefault();                
            if ($("#createnewworker").attr("style") == "display: none;") {
            $("#createnewworker").attr("style","display: block;" );                   
            } else $("#createnewworker").attr("style","display: none;"); 
            }) 

            $("#cancelcreateworker").click(function(e){
            e.preventDefault();                
            if ($("#createnewworker").attr("style") == "display: none;") {
            $("#createnewworker").attr("style","display: block;" );                   
            } else $("#createnewworker").attr("style","display: none;"); 
            })
            });
        </h:outputScript> 
        <h:panelGroup layout="block" style="margin-bottom: 5px;"><h:link value="#{msgs.create_worker}" outcome="createWorker" styleClass="btn btn-success"/></h:panelGroup>
        <h:form id="form">
            <p:growl id="messages" showDetail="true" /> 

            <p:dataTable var="worker" value="#{listProjectWorkersBean.lazyModel}" paginator="true" rows="10"
                         paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                         rowsPerPageTemplate="5,10,15" selectionMode="single" selection="#{listProjectWorkersBean.selectedWorker}" id="workerTable" lazy="true">

                <p:ajax event="rowSelect" listener="#{listProjectWorkersBean.onRowSelect}"  />

                <p:column headerText="Name" sortBy="surname" filterBy="#{worker.name}">
                    <h:outputText value="#{worker.name}" />
                </p:column>

                <p:column headerText="Surname" sortBy="surname" filterBy="#{worker.surname}">
                    <h:outputText value="#{worker.surname}" />
                </p:column>

                <p:column headerText="DNI" sortBy="dni" filterBy="#{worker.dni}">
                    <h:outputText value="#{worker.dni}" />
                </p:column>

                <p:column headerText="Email" sortBy="email" filterBy="#{worker.email}">
                    <h:outputText value="#{worker.email}" />
                </p:column>

                <p:column styleClass="edit">
                    <h:link value="#{msgs.edit}" styleClass="btn btn-sm btn-default" style="margin-right: 10px"/>                   
                    <h:link value="#{msgs.delete}" styleClass="btn btn-sm btn-default"/>
                </p:column>

            </p:dataTable>

        </h:form>
    </ui:define>
</ui:composition>
